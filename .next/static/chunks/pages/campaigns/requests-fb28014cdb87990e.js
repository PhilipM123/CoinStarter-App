(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8216:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return t(2601)}])},2601:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return z}});var n=t(7568),s=t(1438),a=t(2951),l=t(8029),i=t(460),c=t(655),o=t(5893),d=t(7294),u=t(7462),p=t(3871),h=t(6010),v=t(8459),f=t(8935),m=t(2519),Z=t(2248);function g(e){var r=e.children,t=e.className,n=(0,h.Z)(t),s=(0,f.Z)(g,e),a=(0,m.Z)(g,e);return d.createElement(a,(0,u.Z)({},s,{className:n}),r)}g.handledProps=["as","children","className"],g.defaultProps={as:"tbody"},g.propTypes={};var b=g,x=t(9591),w=t(5150);function j(e){var r=e.active,t=e.children,n=e.className,s=e.collapsing,a=e.content,l=e.disabled,i=e.error,c=e.icon,o=e.negative,p=e.positive,g=e.selectable,b=e.singleLine,x=e.textAlign,y=e.verticalAlign,G=e.warning,A=e.width,N=(0,h.Z)((0,v.lG)(r,"active"),(0,v.lG)(s,"collapsing"),(0,v.lG)(l,"disabled"),(0,v.lG)(i,"error"),(0,v.lG)(o,"negative"),(0,v.lG)(p,"positive"),(0,v.lG)(g,"selectable"),(0,v.lG)(b,"single line"),(0,v.lG)(G,"warning"),(0,v.X4)(x),(0,v.Ok)(y),(0,v.H0)(A,"wide"),n),k=(0,f.Z)(j,e),R=(0,m.Z)(j,e);return Z.kK(t)?d.createElement(R,(0,u.Z)({},k,{className:N}),w.Z.create(c),a):d.createElement(R,(0,u.Z)({},k,{className:N}),t)}j.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],j.defaultProps={as:"td"},j.propTypes={},j.create=(0,x.u5)(j,(function(e){return{content:e}}));var y=j;function G(e){var r=e.children,t=e.className,n=e.content,s=e.fullWidth,a=(0,h.Z)((0,v.lG)(s,"full-width"),t),l=(0,f.Z)(G,e),i=(0,m.Z)(G,e);return d.createElement(i,(0,u.Z)({},l,{className:a}),Z.kK(r)?n:r)}G.handledProps=["as","children","className","content","fullWidth"],G.defaultProps={as:"thead"},G.propTypes={};var A=G;function N(e){var r=e.as,t=(0,f.Z)(N,e);return d.createElement(A,(0,u.Z)({},t,{as:r}))}N.handledProps=["as"],N.propTypes={},N.defaultProps={as:"tfoot"};var k=N;function R(e){var r=e.as,t=e.className,n=e.sorted,s=(0,h.Z)((0,v.cD)(n,"sorted"),t),a=(0,f.Z)(R,e);return d.createElement(y,(0,u.Z)({},a,{as:r,className:s}))}R.handledProps=["as","className","sorted"],R.propTypes={},R.defaultProps={as:"th"};var P=R;function q(e){var r=e.active,t=e.cellAs,n=e.cells,s=e.children,a=e.className,l=e.disabled,i=e.error,c=e.negative,o=e.positive,g=e.textAlign,b=e.verticalAlign,x=e.warning,w=(0,h.Z)((0,v.lG)(r,"active"),(0,v.lG)(l,"disabled"),(0,v.lG)(i,"error"),(0,v.lG)(c,"negative"),(0,v.lG)(o,"positive"),(0,v.lG)(x,"warning"),(0,v.X4)(g),(0,v.Ok)(b),a),j=(0,f.Z)(q,e),G=(0,m.Z)(q,e);return Z.kK(s)?d.createElement(G,(0,u.Z)({},j,{className:w}),(0,p.Z)(n,(function(e){return y.create(e,{defaultProps:{as:t}})}))):d.createElement(G,(0,u.Z)({},j,{className:w}),s)}q.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],q.defaultProps={as:"tr",cellAs:"td"},q.propTypes={},q.create=(0,x.u5)(q,(function(e){return{cells:e}}));var E=q;function _(e){var r=e.attached,t=e.basic,n=e.celled,s=e.children,a=e.className,l=e.collapsing,i=e.color,c=e.columns,o=e.compact,g=e.definition,x=e.fixed,w=e.footerRow,j=e.headerRow,y=e.headerRows,G=e.inverted,N=e.padded,R=e.renderBodyRow,P=e.selectable,q=e.singleLine,C=e.size,T=e.sortable,F=e.stackable,H=e.striped,O=e.structured,B=e.tableData,D=e.textAlign,L=e.unstackable,X=e.verticalAlign,K=(0,h.Z)("ui",i,C,(0,v.lG)(n,"celled"),(0,v.lG)(l,"collapsing"),(0,v.lG)(g,"definition"),(0,v.lG)(x,"fixed"),(0,v.lG)(G,"inverted"),(0,v.lG)(P,"selectable"),(0,v.lG)(q,"single line"),(0,v.lG)(T,"sortable"),(0,v.lG)(F,"stackable"),(0,v.lG)(H,"striped"),(0,v.lG)(O,"structured"),(0,v.lG)(L,"unstackable"),(0,v.sU)(r,"attached"),(0,v.sU)(t,"basic"),(0,v.sU)(o,"compact"),(0,v.sU)(N,"padded"),(0,v.X4)(D),(0,v.Ok)(X),(0,v.H0)(c,"column"),"table",a),U=(0,f.Z)(_,e),z=(0,m.Z)(_,e);if(!Z.kK(s))return d.createElement(z,(0,u.Z)({},U,{className:K}),s);var I={defaultProps:{cellAs:"th"}},W=(j||y)&&d.createElement(A,null,E.create(j,I),(0,p.Z)(y,(function(e){return E.create(e,I)})));return d.createElement(z,(0,u.Z)({},U,{className:K}),W,d.createElement(b,null,R&&(0,p.Z)(B,(function(e,r){return E.create(R(e,r))}))),w&&d.createElement(k,null,E.create(w)))}_.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],_.defaultProps={as:"table"},_.propTypes={},_.Body=b,_.Cell=y,_.Footer=k,_.Header=A,_.HeaderCell=P,_.Row=E;var C=_,T=t(967),F=t(6215),H=t(3544),O=t(4148),B=t(4111),D=t(4924),L=t(1508),X=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){var e;(0,s.Z)(this,t),e=r.apply(this,arguments);var a=(0,B.Z)(e);(0,D.Z)((0,B.Z)(e),"onApprove",function(){var e=(0,n.Z)((function(e){var r;return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,L.Z.eth.getAccounts()];case 1:return r=e.sent(),[4,(0,O.Z)(a.props.address).methods.approveRequest(a.props.id).send({from:r[0]})];case 2:return e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return F.Router.replaceRoute("/campaigns/".concat(a.props.address,"/requests")),[2]}}))}));return function(r){return e.apply(this,arguments)}}());var l=(0,B.Z)(e);return(0,D.Z)((0,B.Z)(e),"onFinalise",function(){var e=(0,n.Z)((function(e){var r;return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,L.Z.eth.getAccounts()];case 1:return r=e.sent(),[4,(0,O.Z)(l.props.address).methods.finalizeRequest(l.props.id).send({from:r[0]})];case 2:return e.sent(),F.Router.replaceRoute("/campaigns/".concat(l.props.address,"/requests")),[2]}}))}));return function(r){return e.apply(this,arguments)}}()),e}return(0,a.Z)(t,[{key:"render",value:function(){var e=C.Row,r=C.Cell,t=this.props.request,n=t.approvalCount>this.props.approvers/2;return(0,o.jsxs)(e,{disabled:t.complete,positive:n&&!t.complete,children:[(0,o.jsx)(r,{children:this.props.id}),(0,o.jsx)(r,{children:t.description}),(0,o.jsx)(r,{children:L.Z.utils.fromWei(t.value,"ether")}),(0,o.jsx)(r,{children:t.recipient}),(0,o.jsx)(r,{children:"".concat(t.approvalCount,"/").concat(this.props.approvers)}),(0,o.jsx)(r,{children:t.complete?null:(0,o.jsx)(T.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,o.jsx)(r,{children:t.complete?null:(0,o.jsx)(T.Z,{color:"teal",basic:!0,onClick:this.onFinalise,children:"Finalise"})})]})}}]),t}(d.Component),K=X,U=function(e){(0,l.Z)(t,e);var r=(0,i.Z)(t);function t(){return(0,s.Z)(this,t),r.apply(this,arguments)}return(0,a.Z)(t,[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(r,t,n){return(0,o.jsx)(K,{id:t,request:r,address:e.props.address,approvers:e.props.approvers},t)}))}},{key:"render",value:function(){var e=C.Header,r=C.Row,t=C.HeaderCell,n=C.Body;return(0,o.jsxs)(H.Z,{children:[(0,o.jsx)("h3",{children:"Requests"}),(0,o.jsx)(F.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,o.jsx)("a",{children:(0,o.jsx)(T.Z,{floated:"right",style:{marginBottom:10},primary:!0,children:"Add Request"})})}),(0,o.jsxs)(C,{children:[(0,o.jsx)(e,{children:(0,o.jsxs)(r,{children:[(0,o.jsx)(t,{children:"ID"}),(0,o.jsx)(t,{children:"Description"}),(0,o.jsx)(t,{children:"Amount"}),(0,o.jsx)(t,{children:"Recipient"}),(0,o.jsx)(t,{children:"Approval Count"}),(0,o.jsx)(t,{children:"Approve"}),(0,o.jsx)(t,{children:"Finalise"})]})}),(0,o.jsxs)(n,{children:[(0,o.jsx)(r,{}),this.renderRows()]})]}),(0,o.jsx)("div",{style:{marginTop:10},children:"".concat(this.props.requestCount," Requests Found")})]})}}],[{key:"getInitialProps",value:function(e){return(0,n.Z)((function(){var r,t,n,s,a,l;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return r=e.query.address,[4,(t=(0,O.Z)(r)).methods.getRequestsCount().call()];case 1:return n=i.sent(),[4,t.methods.getSummary().call()];case 2:return s=i.sent(),a=s[3],[4,Promise.all(Array(parseInt(n)).fill().map((function(e,r){return t.methods.requests(r).call()})))];case 3:return l=i.sent(),[2,{address:r,requests:l,requestCount:n,approvers:a}]}}))}))()}}]),t}(d.Component),z=U},4924:function(e,r,t){"use strict";function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}t.d(r,{Z:function(){return n}})}},function(e){e.O(0,[774,543,896,421,888,179],(function(){return r=8216,e(e.s=r);var r}));var r=e.O();_N_E=r}]);